@use "sass:math";
@use "variables";

/* https://medium.com/codyhouse/create-your-design-system-part-1-typography-7c630d9092bd */
/* https://codyhouse.co/ds/docs/framework/typography */
$font: "Fira Sans", Helvetica, Arial, sans-serif;
$base-size: 1em;
$base-weight: 400;
$heading-weight: 600;
$base-ratio: 1.2;
$heading-line-height: var(--space-lg);
$body-line-height: var(--space-lg);
$letter-spacing: 0;
$word-spacing: 0;

/* With thanks to https://google-webfonts-helper.herokuapp.com/ */
/* fira-sans-regular - latin */
@font-face {
    font-family: "Fira Sans";
    font-style: normal;
    font-weight: #{$base-weight};
    src: url("../assets/fonts/fira-sans-v11-latin/fira-sans-v11-latin-regular.eot"); /* IE9 Compat Modes */
    src: local(""),
        url("../assets/fonts/fira-sans-v11-latin/fira-sans-v11-latin-regular.eot?#iefix")
            format("embedded-opentype"),
        /* IE6-IE8 */
            url("../assets/fonts/fira-sans-v11-latin/fira-sans-v11-latin-regular.woff2")
            format("woff2"),
        /* Super Modern Browsers */
            url("../assets/fonts/fira-sans-v11-latin/fira-sans-v11-latin-regular.woff")
            format("woff"),
        /* Modern Browsers */
            url("../assets/fonts/fira-sans-v11-latin/fira-sans-v11-latin-regular.ttf")
            format("truetype"),
        /* Safari, Android, iOS */
            url("../assets/fonts/fira-sans-v11-latin/fira-sans-v11-latin-regular.svg#FiraSans")
            format("svg"); /* Legacy iOS */
}

:root {
    --font: #{$font};
    --text-base-size: #{$base-size};
    --text-base-weight: #{$base-weight};
    --text-heading-weight: #{$heading-weight};
    --text-scale-ratio: #{$base-ratio};

    --body-line-height: #{$body-line-height};
    --heading-line-height: #{$heading-line-height};
    --word-spacing: #{$word-spacing};
    --letter-spacing: #{$letter-spacing};

    --text-xs: calc(
        #{$base-size} / (var(--text-scale-ratio) * var(--text-scale-ratio))
    );
    --text-sm: calc(var(--text-xs) * var(--text-scale-ratio));
    --text-md: calc(
        var(--text-sm) * var(--text-scale-ratio) * var(--text-scale-ratio)
    );
    --text-lg: calc(var(--text-md) * var(--text-scale-ratio));
    --text-xl: calc(var(--text-lg) * var(--text-scale-ratio));
    --text-xxl: calc(var(--text-xl) * var(--text-scale-ratio));
    --text-xxxl: calc(var(--text-xxl) * var(--text-scale-ratio));
    --text-xxxxl: calc(var(--text-xxxl) * var(--text-scale-ratio));
}

/* Selection Colour */
::selection {
    background: var(--col-brand-100);
}

/* Applies Text Size */
/* https://www.smashingmagazine.com/2020/07/css-techniques-legibility/ */
body {
    font-size: var(--text-base-size);
    font-family: var(--font);
    color: var(--text);
    background: var(--inverse);
    word-spacing: var(--word-spacing);
    line-height: var(--body-line-height);
}

h1 {
    font-size: var(--text-xl);
    margin: var(--space-md) 0 var(--space-sm) 0;
}

h2 {
    font-size: var(--text-lg);
    margin: var(--space-md) 0 var(--space-sm) 0;
}

h3 {
    font-size: var(--text-md);
    margin: var(--space-sm) 0 var(--space-xs) 0;
}

h4 {
    font-size: var(--text-sm);
    margin: var(--space-sm) 0 var(--space-xs) 0;
}

p,
ol,
ul,
i,
b {
    display: block;
    font-size: var(--text-base-size);
    width: 60ch;
    max-width: 100%;
    margin: 0 0 var(--space-md) 0;
}

h5,
small,
h6 {
    font-size: var(--text-xs);
    margin: var(--space-sm) 0 var(--space-xs) 0;
}

small {
    font-size: var(--text-xs);
    margin: 0;
}

strong {
    color: var(--col-black-400);
    weight: var(--text-heading-weight);
}

h1,
h2,
h3,
h4,
h5,
h6 {
    color: var(--col-black-400);
    line-height: var(--heading-line-height);
    transition: all var(--transition-fast);

    a {
        color: var(--col-black-400);
        text-decoration: none;
        cursor: pointer;

        &:hover {
            text-decoration: underline;
            text-decoration-color: var(--col-brand-900);
        }
    }
}

.description {
    margin: 0 0 var(--space-md) 0;

    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
        margin: 0 0 var(--space-xxxs) 0;
    }
}

@supports (font-size-adjust: 1) {
    article {
        font-size-adjust: 0.5;
    }
}
